{
  "hash": "24cfc26300e77a929655fa96c22845f6",
  "result": {
    "engine": "knitr",
    "markdown": "---\nsubtitle: Sampling Design\n---\n\n\n\n# Übung 6 {#sec-uebung-6}\n\n\nR eignet sich hervorragend um ein Sampling Design umzusetzen. Am ersten Tag des CAS habt ihr etwas zu *Sampling Design* gelernt (siehe @fig-sampling-design).\n\n::::{#fig-sampling-design}\n:::{.callout-note collapse=\"true\"}\n\n## Folie Sampling Design\n\n![](images/sampling-design-folie.png)\n\n:::\n::::\n﻿\n\n\nSchauen wir uns folgende *Sampling* Strategien an:\n\n- zufällig\n  - nicht stratifiziert (siehe @fig-zufaellig-nicht-stratifiziert2 und @sec-zufaellig-nicht-stratifiziert)\n  - stratifiziert (siehe @fig-zufaellig-stratifiziert2 und @sec-zufaellig-stratifiziert)\n- systematisch / regelmässig (siehe @fig-systematisch2 und @sec-systematisch)\n\n\n::::{.column-page}\n:::{#fig-sampling-design .column-body-outset layout-ncol=\"2\"}\n\n![30 Samples total, 10 Samples pro Lokalität](uebung_6_files/figure-html/fig-zufaellig-nicht-stratifiziert-1.png){#fig-zufaellig-nicht-stratifiziert2}\n\n![30 Samples total, verteilt nach Hektaren](uebung_6_files/figure-html/fig-zufaellig-stratifiziert-1.png){#fig-zufaellig-stratifiziert2}\n\n![30 Samples total, systematisch / regelmässig verteilt](uebung_6_files/figure-html/fig-systematisch-1.png){#fig-systematisch2}\n\nVerschiedene Sampling Strategien\n:::\n::::\n\n## Vorbereitung\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"sf\")\nlibrary(\"terra\")\nlibrary(\"tmap\")\ntmap_mode(\"plot\")\n\nset.seed(1920)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntww <- read_sf(\"data/original/TWW/TWW_LV95/trockenwiesenweiden.shp\")\n\nfilter <- c(\"Marièrs\", \"Buzzera\", \"Truois\")   # <1>\ntww <- tww[tww$Name %in% filter,]             # <1>\n\ntww <- tww[, \"Name\"]                          # <2>\n\ntww$area_ha <- as.numeric(st_area(tww))/10000 # <3>\n\nsamples_total <- 30                           # <4>\n\n\nbase_plot <- tm_shape(tww) +                  # <5>\n  tm_polygons(col = \"Name\") +                 # <5>\n  tm_layout(legend.show = FALSE, asp = 7/5)   # <5>\n```\n:::\n\n\n1. Nur 3 Lokaliäten auswählen\n2. Nur die Spalte \"Name\" (=Lokalität) behalten. Die Geometrie Spalte kommt automatisch mit.\n3. Fläche berechnen und in Hektaren umrechnen (als Vorbereitung für die das stratifizierte Sampling)\n4. Variabel erstelen für die Summe an Samples, die wir machen können / wollen\n5. Optional: Da wir immer wieder die gleiche Karte machen, können wir eine Basis Karte erstellen und immer wieder benutzen. \n\n## Zufällige Verteilung\n\nFür die zufällige Verteilung der 30 Samples, gibt es zwei Möglichkeiten: (1) Nicht stratifiziert und (2) Stratifiziert. In jedem Fall brauchen wir eine Spalte mit der Anzahl der Samples für die jeweilige Lokalität:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntww$nicht_stratifiziert <- samples_total/nrow(tww)                      #<1>\n\ntww$stratifiziert <- round(samples_total/sum(tww$area_ha)*tww$area_ha)  #<2>\n```\n:::\n\n\n1. Nicht stratifiziert: In jeder Lokalität gleich viele Samples ($\\frac{30}{3}= 10$)\n2. Stratifiziert: Samples in Relation zur Fläche ($A$) verteilen ($\\frac{30}{\\sum \\text{A}} \\times \\text{A}$)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::kable(tww)\n```\n\n::: {.cell-output-display}\n\n\n|Name    |geometry                       |  area_ha| nicht_stratifiziert| stratifiziert|\n|:-------|:------------------------------|--------:|-------------------:|-------------:|\n|Marièrs |MULTIPOLYGON (((2822107 119... | 240.5064|                  10|            13|\n|Buzzera |MULTIPOLYGON (((2820384 118... | 305.1896|                  10|            16|\n|Truois  |MULTIPOLYGON (((2815810 118... |  20.1714|                  10|             1|\n\n\n:::\n:::\n\n\n\n\n\n### Nicht stratifiziert {#sec-zufaellig-nicht-stratifiziert}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsample_plots1 <- st_sample(tww, size = tww$nicht_stratifiziert)\n\nbase_plot +\n  tm_shape(sample_plots1) +\n  tm_dots(shape = 3, size = 3) +\n  tm_layout(title = \"Zufällig - Nicht stratifiziert\", legend.show = TRUE)\n```\n\n::: {.cell-output-display}\n![](uebung_6_files/figure-html/fig-zufaellig-nicht-stratifiziert-1.png){#fig-zufaellig-nicht-stratifiziert width=672}\n:::\n:::\n\n\n\n### Stratifiziert {#sec-zufaellig-stratifiziert}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsample_plots2 <- st_sample(tww, size = tww$stratifiziert)\n\nbase_plot +\n  tm_shape(sample_plots2) +\n  tm_dots(shape = 3, size = 3) +\n  tm_layout(title = \"Zufällig - Stratifiziert\")\n```\n\n::: {.cell-output-display}\n![](uebung_6_files/figure-html/fig-zufaellig-stratifiziert-1.png){#fig-zufaellig-stratifiziert width=672}\n:::\n:::\n\n\n\n\n\n## Systematisch / Regelmässig {#sec-systematisch}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsample_plots3 <- st_sample(tww, size = samples_total, type = \"regular\")\n\nbase_plot +\n  tm_shape(sample_plots3) +\n  tm_dots(shape = 3, size = 3) +\n  tm_layout(title = \"Systematisch / Regelmässig\")\n```\n\n::: {.cell-output-display}\n![](uebung_6_files/figure-html/fig-systematisch-1.png){#fig-systematisch width=672}\n:::\n:::\n\n\n\n\n## Übung \n\n(Open End und ohne Musterlösung)\n\n- Wähle einen kleineren Kanton oder eine Gemeinde aus\n- Selektiere die TWW Standorte dieser Gemeinde / dieses Kantons\n- Wähle ein sinnvolles Sampling Design und setze es mit R um\n- Extrahiere die Höhenwerte für jeden Sample\n- Visualisere in einer Karte:\n  - die TWW Flächen\n  - Gemeinde- / Kantonsgrenze\n  - Sampling Standorte\n  - Swissimage Hintergrund Karte\n  - Nordpfeil, Scalebar\n\n\n\n",
    "supporting": [
      "uebung_6_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}